# Ambiguity, Confusion, Diversion, and the POSIX spec.

# D

The behaviour of the D function is to delete the first portion
of the pattern space (through the first newline), and begin a
new cycle that skips reading from input if the pattern space is
still non-empty (this behaviour is observed and documented in
GNU sed). This varies from what the spec says, which is simply
that a new cycle starts.

sed.js is implemented to follow the GNU behaviour.

The difference is illustrated with the following script:

    printf '%d\n' 1 2 3 4 5 | sed 'N;2D;3p'

The first cycle proceeds by executing 'N' (bring line 2 into the
pattern space, and changing the current line number to 2), and then
'D' which starts a new cycle with line 2 in the pattern space. A
posix cycle would proceed by reading line 3 and then the 'N'
would read line 4, and the '3p' command would not be executed,
because line 4 is current. A GNU cycle proceeds by skipping
reading line 3, and executing the 'N' command which reads line
3. Now the '3p' command gets excuted, writing lines 2 and 3 to
stdout.

